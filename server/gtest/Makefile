# Test objects.
TOBJS=build/main.o build/hinstr.o build/keylist.o build/sanitation.o build/common.o
# Objects from the hipe server which reside in the parent directory
# after running make generated by qmake in parent directory (refer
# README in parent dir).
HOBJS=../hipe_instruction.o ../keylist.o ../sanitation.o ../common.o
CC=g++
CFLAGS=-c
LFLAGS=-lgtest -lgtest_main -lpthread
INC= -I../

test: $(TOBJS) 
	$(CC) $(TOBJS) $(HOBJS) $(LFLAGS) $(INC) -o $@

build/%.o: src/%.cpp
	$(CC) $(CFLAGS) $< -o $@

clean:
	rm test build/*.o

